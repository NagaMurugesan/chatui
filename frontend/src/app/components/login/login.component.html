<div class="min-h-screen flex items-center justify-center bg-gray-100">
  <div class="bg-white p-8 rounded shadow-md w-full max-w-md">
    <h2 class="text-2xl font-bold mb-6 text-center text-gray-800">Gravity Chat</h2>

    <!-- Login Type Selector -->
    <div class="mb-6">
      <label class="block text-gray-700 text-sm font-bold mb-2">Login Method</label>
      <div class="relative">
        <select [(ngModel)]="authType"
          class="block appearance-none w-full bg-white border border-gray-400 hover:border-gray-500 px-4 py-2 pr-8 rounded shadow leading-tight focus:outline-none focus:shadow-outline">
          <option value="sso">SSO Login</option>
          <option value="local">Local Login</option>
        </select>
        <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700">
          <svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
            <path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z" />
          </svg>
        </div>
      </div>
    </div>

    <!-- Local Login Form -->
    <div *ngIf="authType === 'local'">
      <form *ngIf="isLogin && !isForgotPassword" (ngSubmit)="onLogin()">
        <div class="mb-4">
          <label class="block text-gray-700 text-sm font-bold mb-2" for="email">Email</label>
          <input [(ngModel)]="email" name="email"
            class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
            id="email" type="email" placeholder="Email">
        </div>
        <div class="mb-6">
          <label class="block text-gray-700 text-sm font-bold mb-2" for="password">Password</label>
          <input [(ngModel)]="password" name="password"
            class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline"
            id="password" type="password" placeholder="******************">
        </div>
        <div class="flex items-center justify-between">
          <button
            class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline"
            type="button" (click)="onLogin()">
            Sign In
          </button>
          <a class="inline-block align-baseline font-bold text-sm text-blue-500 hover:text-blue-800 cursor-pointer"
            (click)="toggleForgotPassword()">
            Forgot Password?
          </a>
        </div>
        <div class="mt-4 text-center">
          <a class="text-sm text-blue-500 hover:text-blue-800 cursor-pointer" (click)="toggleMode()">
            Need an account? Register
          </a>
        </div>
      </form>

      <form *ngIf="!isLogin && !isForgotPassword" (ngSubmit)="onRegister()">
        <div class="mb-4">
          <label class="block text-gray-700 text-sm font-bold mb-2">First Name</label>
          <input [(ngModel)]="firstName" name="firstName"
            class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
            placeholder="First Name">
        </div>
        <div class="mb-4">
          <label class="block text-gray-700 text-sm font-bold mb-2">Last Name</label>
          <input [(ngModel)]="lastName" name="lastName"
            class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
            placeholder="Last Name">
        </div>
        <div class="mb-4">
          <label class="block text-gray-700 text-sm font-bold mb-2" for="reg-email">Email</label>
          <input [(ngModel)]="email" name="email"
            class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
            id="reg-email" type="email" placeholder="Email">
        </div>
        <div class="mb-6">
          <label class="block text-gray-700 text-sm font-bold mb-2" for="reg-password">Password</label>
          <input [(ngModel)]="password" name="password"
            class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline"
            id="reg-password" type="password" placeholder="******************">
        </div>
        <div class="flex items-center justify-between">
          <button
            class="bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline"
            type="button" (click)="onRegister()">
            Register
          </button>
          <a class="text-sm text-blue-500 hover:text-blue-800 cursor-pointer" (click)="toggleMode()">
            Already have an account? Login
          </a>
        </div>
      </form>

      <form *ngIf="isForgotPassword" (ngSubmit)="onForgotPassword()">
        <div class="mb-4">
          <label class="block text-gray-700 text-sm font-bold mb-2" for="fp-email">Email</label>
          <input [(ngModel)]="email" name="email"
            class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
            id="fp-email" type="email" placeholder="Email">
        </div>
        <div class="flex items-center justify-between">
          <button
            class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline"
            type="button" (click)="onForgotPassword()">
            Send Reset Link
          </button>
          <a class="inline-block align-baseline font-bold text-sm text-blue-500 hover:text-blue-800 cursor-pointer"
            (click)="toggleForgotPassword()">
            Back to Login
          </a>
        </div>
      </form>
    </div>

    <!-- SSO Login Form -->
    <div *ngIf="authType === 'sso'" class="text-center py-8">
      <p class="text-gray-600 mb-6">Sign in with your organization's Single Sign-On</p>

      <div class="mb-4 text-left">
        <label class="block text-gray-700 text-sm font-bold mb-2" for="sso-email">Email</label>
        <input [(ngModel)]="email" name="email"
          class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
          id="sso-email" type="email" placeholder="Enter your email">
      </div>

      <button (click)="onSSOLogin()"
        class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg focus:outline-none focus:shadow-outline w-full flex items-center justify-center gap-2">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"></path>
        </svg>
        Login with SSO
      </button>
    </div>

    <p *ngIf="errorMessage" class="text-red-500 text-xs italic mt-4">{{ errorMessage }}</p>
    <p *ngIf="successMessage" class="text-green-500 text-xs italic mt-4">{{ successMessage }}</p>
  </div>
</div>